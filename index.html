<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrueCost - Investment Comparison Results</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'sky': {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                        }
                    },
                    fontFamily: {
                        'sans': ['DM Sans', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'DM Sans', sans-serif;
        }
        
        .card-shadow {
            box-shadow: 0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04);
        }
        
        .card-shadow-lg {
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.08), 0 8px 10px -6px rgba(0,0,0,0.04);
        }
        
        .details-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out;
        }
        
        .details-content.expanded {
            max-height: 300px;
            padding-top: 1rem;
        }
        
        .chevron {
            transition: transform 0.3s ease;
        }
        
        .chevron.rotated {
            transform: rotate(180deg);
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-in {
            animation: slideIn 0.5s ease-out;
        }
        
        /* Enhanced tooltip styling */
        .info-icon {
            position: relative;
            cursor: help;
        }

        .info-icon:hover::after {
            content: attr(title);
            position: absolute;
            left: 100%;
            top: 0;
            margin-left: 12px;
            background: #1e293b;
            color: white;
            padding: 14px 18px;
            border-radius: 8px;
            font-size: 13px;
            line-height: 1.6;
            white-space: pre-line;
            z-index: 9999;
            min-width: 320px;
            max-width: 400px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            font-weight: normal;
        }

        .info-icon:hover::before {
            content: '';
            position: absolute;
            left: 100%;
            top: 16px;
            margin-left: 6px;
            border: 6px solid transparent;
            border-right-color: #1e293b;
            z-index: 9999;
        }

        /* Details element styling */
        details summary {
            list-style: none;
        }

        details summary::-webkit-details-marker {
            display: none;
        }

        details[open] summary {
            margin-bottom: 8px;
        }

        details summary::before {
            content: 'â–¸ ';
            transition: transform 0.2s;
            display: inline-block;
        }

        details[open] summary::before {
            transform: rotate(90deg);
        }
    </style>
</head>
<body class="bg-slate-50">
    
    <!-- Header -->
    <div class="bg-gradient-to-r from-sky-500 to-sky-600 text-white shadow-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 py-6">
            <!-- Top row: Logo only -->
            <div class="mb-4">
                <!-- TrueCost Logo -->
                <div class="flex items-center gap-3">
                    <div class="bg-white rounded-lg p-2 shadow-md">
                        <svg class="w-8 h-8 text-sky-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold tracking-tight">TrueCost</h1>
                        <p class="text-xs text-sky-100">Investment Comparison Tool</p>
                    </div>
                </div>
            </div>
            
            <!-- Bottom row: Your inputs and buttons -->
            <div class="bg-sky-600 bg-opacity-50 rounded-lg px-4 py-3 flex justify-between items-center">
                <p class="text-sky-50 text-sm">
                    <span class="font-semibold">Your inputs:</span> $500/month for 25 years
                </p>
                <div class="flex gap-2">
                    <button onclick="uploadILP()" class="px-4 py-2 bg-sky-700 text-white rounded-lg font-medium hover:bg-sky-800 transition shadow-sm text-sm flex items-center gap-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                        </svg>
                        Upload ILP
                    </button>
                    <button onclick="toggleEditMode()" class="px-4 py-2 bg-white text-sky-600 rounded-lg font-medium hover:bg-sky-50 transition shadow-sm text-sm">
                        Edit
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Mode Section (Hidden by default) -->
    <div id="editMode" class="bg-white border-b-2 border-sky-200 shadow-lg sticky top-[136px] z-40" style="display: none;">
        <div class="max-w-7xl mx-auto px-4 py-6">
            <h3 class="text-lg font-bold text-slate-800 mb-4">Edit Your Inputs</h3>
            
            <!-- Quick Scenario Buttons -->
            <div class="bg-sky-50 rounded-lg p-4 mb-6">
                <div class="text-sm font-semibold text-slate-700 mb-2">Quick start:</div>
                <div class="flex gap-2">
                    <button onclick="useScenario(500,25,5,5)" type="button"
                            class="px-3 py-2 bg-white rounded-lg text-sm hover:bg-sky-100 border border-sky-200 transition">
                        ðŸ“Š $500 Ã— 25y
                    </button>
                    <button onclick="useScenario(1000,20,5,5)" type="button"
                            class="px-3 py-2 bg-white rounded-lg text-sm hover:bg-sky-100 border border-sky-200 transition">
                        ðŸ’¼ $1K Ã— 20y
                    </button>
                    <button onclick="useScenario(1500,10,5,5)" type="button"
                            class="px-3 py-2 bg-white rounded-lg text-sm hover:bg-sky-100 border border-sky-200 transition">
                        ðŸ‘´ $1.5K Ã— 10y
                    </button>
                </div>
            </div>
            
            <form id="editForm" class="grid grid-cols-3 gap-6">
                
                <!-- Monthly Premium -->
                <div>
                    <label class="flex items-center gap-2 text-sm font-semibold text-slate-700 mb-2">
                        Monthly Premium ($)
                        <button type="button" class="info-icon text-slate-400 hover:text-slate-600" 
                                title="What it means: Amount you'll pay every month

Where to find: Page 1-2 of your proposal, labeled 'Monthly Premium' or 'Regular Premium'">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"/>
                            </svg>
                        </button>
                    </label>
                    <input type="number" id="editMonthly" value="500" 
                           class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent mb-2">
                    <div class="text-xs text-slate-600 mb-2">
                        Amount quoted in your ILP proposal
                    </div>
                    <details class="text-xs">
                        <summary class="text-sky-600 hover:text-sky-700 cursor-pointer select-none">
                            Yet to decide?
                        </summary>
                        <div class="mt-2 pl-3 text-slate-600 space-y-1">
                            <div>Start with <strong>$500/month</strong></div>
                            <div class="text-xs text-slate-500">
                                Rule: 10-15% of income
                                <br>e.g., $5K â†’ $500-750
                            </div>
                        </div>
                    </details>
                </div>
                
                <!-- Investment Period -->
                <div>
                    <label class="flex items-center gap-2 text-sm font-semibold text-slate-700 mb-2">
                        Investment Period (Years)
                        <button type="button" class="info-icon text-slate-400 hover:text-slate-600" 
                                title="What it means: How long you MUST pay premiums (your money is locked in)

Where to find: Look for 'Premium Payment Period' or 'Minimum Investment Period (MIP)' in your proposal">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"/>
                            </svg>
                        </button>
                    </label>
                    <input type="number" id="editYears" value="25" 
                           class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent mb-2">
                    <div class="text-xs text-slate-600 mb-2">
                        Premium payment period from proposal
                    </div>
                    <details class="text-xs">
                        <summary class="text-sky-600 hover:text-sky-700 cursor-pointer select-none">
                            Yet to decide?
                        </summary>
                        <div class="mt-2 pl-3 text-slate-600 space-y-1">
                            <div><strong>20-25y</strong> if 20s-30s</div>
                            <div><strong>10-15y</strong> if 40s-50s</div>
                            <div class="text-xs text-slate-500">
                                Longer = bigger fee impact
                            </div>
                        </div>
                    </details>
                </div>
                
                <!-- Expected Returns -->
                <div>
                    <label class="flex items-center gap-2 text-sm font-semibold text-slate-700 mb-2">
                        Expected Returns
                        <button type="button" class="info-icon text-slate-400 hover:text-slate-600" 
                                title="What it means: How much your investment is expected to grow each year (before fees)

Where to find: Look for 'Projected Returns' or 'Illustrated Returns' in your ILP proposal. Choose the fund type that matches.">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"/>
                            </svg>
                        </button>
                    </label>
                    <select id="editReturns" class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent mb-2">
                        <option value="3">Conservative (3%) - Mostly bonds</option>
                        <option value="5" selected>Balanced (5%) - Mix of stocks & bonds</option>
                        <option value="7">Growth (7%) - Mostly stocks</option>
                        <option value="9">Aggressive (9%) - All stocks</option>
                    </select>
                    <div class="text-xs text-slate-600 mb-2">
                        Choose based on your ILP's fund type
                    </div>
                    <details class="text-xs">
                        <summary class="text-sky-600 hover:text-sky-700 cursor-pointer select-none">
                            Not sure which to pick?
                        </summary>
                        <div class="mt-2 pl-3 text-slate-600 space-y-1">
                            <div><strong>Conservative:</strong> Capital-protected, bonds</div>
                            <div><strong>Balanced:</strong> Most common ILP type</div>
                            <div><strong>Growth:</strong> Higher risk equity funds</div>
                            <div><strong>Aggressive:</strong> 100% stocks/tech funds</div>
                        </div>
                    </details>
                </div>
                
                <!-- Annual Fees -->
                <div>
                    <label class="flex items-center gap-2 text-sm font-semibold text-slate-700 mb-2">
                        Annual Fees (%)
                        <button type="button" class="info-icon text-slate-400 hover:text-slate-600" 
                                title="What it means: Total percentage of your money taken as fees each year (higher = less for you)

Where to find: 'Fees & Charges' section. Add up: Admin charge + Fund fee + Policy fee">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"/>
                            </svg>
                        </button>
                    </label>
                    <div class="flex gap-2 mb-2">
                        <input type="number" id="editFees" value="5" step="0.1"
                               class="flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent">
                        <button type="button" onclick="showFeeCalculator()" 
                                class="px-3 py-2 bg-sky-100 text-sky-700 rounded-lg text-xs font-medium hover:bg-sky-200 transition whitespace-nowrap">
                            Calc
                        </button>
                    </div>
                    <div class="text-xs text-slate-600 mb-2">
                        Total fees from proposal (add all)
                    </div>
                    <details class="text-xs">
                        <summary class="text-sky-600 hover:text-sky-700 cursor-pointer select-none">
                            Yet to decide?
                        </summary>
                        <div class="mt-2 pl-3 text-slate-600 space-y-1">
                            <div>Start with <strong>5%</strong></div>
                            <div class="text-xs text-slate-500">
                                Low: 3-4% | Typical: 4-6%
                            </div>
                        </div>
                    </details>
                </div>
                
                <!-- Insurance Details Section -->
                <div class="col-span-3 mt-6 pt-6 border-t border-slate-200">
                    <h4 class="text-sm font-bold text-slate-800 mb-4">Insurance Details</h4>
                    <div class="grid grid-cols-3 gap-6">
                        
                        <!-- Coverage Amount -->
                        <div>
                            <label class="flex items-center gap-2 text-sm font-semibold text-slate-700 mb-2">
                                Coverage Amount ($)
                                <button type="button" class="info-icon text-slate-400 hover:text-slate-600" 
                                        title="What it means: Death/TPD benefit amount in your ILP

Where to find: Look for 'Sum Assured' or 'Death Benefit' in proposal">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"/>
                                    </svg>
                                </button>
                            </label>
                            <input type="number" id="editCoverage" value="100000" 
                                   class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent">
                            <div class="text-xs text-slate-600 mt-1">
                                Typical: $100K - $250K
                            </div>
                        </div>
                        
                        <!-- Age -->
                        <div>
                            <label class="text-sm font-semibold text-slate-700 mb-2 block">
                                Your Age
                            </label>
                            <input type="number" id="editAge" value="28" min="18" max="65"
                                   class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent">
                            <div class="text-xs text-slate-600 mt-1">
                                Used to estimate insurance cost
                            </div>
                        </div>
                        
                        <!-- Gender -->
                        <div>
                            <label class="text-sm font-semibold text-slate-700 mb-2 block">
                                Gender
                            </label>
                            <select id="editGender" class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent">
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                            </select>
                            <div class="text-xs text-slate-600 mt-1">
                                Affects insurance pricing
                            </div>
                        </div>
                    </div>
                </div>
                
            </form>
            
            <div class="flex gap-3 mt-6">
                <button onclick="updateCalculations()" class="px-6 py-2.5 bg-sky-500 hover:bg-sky-600 text-white rounded-lg font-medium transition shadow-sm">
                    Update Results
                </button>
                <button onclick="toggleEditMode()" class="px-6 py-2.5 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded-lg font-medium transition">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <div class="max-w-7xl mx-auto px-4 py-10">
        
        <!-- Section 1: Investment Component -->
        <div class="mb-10">
            <div class="flex items-center gap-4 mb-6">
                <div class="bg-sky-500 text-white rounded-full w-12 h-12 flex items-center justify-center text-2xl font-bold shadow-lg">
                    1
                </div>
                <div>
                    <h2 class="text-3xl font-bold text-slate-800">Investment Component</h2>
                    <p class="text-lg text-slate-600">Compare your ILP investment to alternatives</p>
                </div>
            </div>

        <!-- Comparison Cards Grid -->
        <div class="grid grid-cols-5 gap-4 mb-10 animate-in" style="animation-delay: 0.1s">
            
            <!-- ILP Card -->
            <div class="bg-white rounded-xl card-shadow-lg p-6 border-2 border-slate-200 hover:border-slate-400 hover:shadow-xl transition duration-200">
                <div class="text-center">
                    <div class="mb-4 h-32">
                        <div class="flex items-center justify-center gap-2 mb-3">
                            <p class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Your ILP</p>
                            <button type="button" class="info-icon text-slate-400 hover:text-slate-600" 
                                    title="Investment-Linked Policy: Insurance + investment bundled in one product. Convenience of automatic saving, but higher fees (5% annually) reduce your returns.">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"/>
                                </svg>
                            </button>
                        </div>
                        <div class="text-4xl font-bold text-slate-800 mb-2" id="ilp-value">$250K</div>
                        <div class="h-14 flex items-center justify-center">
                            <p class="text-sm text-slate-500 italic">baseline</p>
                        </div>
                    </div>
                    
                    <div class="space-y-2.5 text-sm text-slate-600 border-t border-slate-200 pt-4 mb-4">
                        <div class="flex items-center justify-between">
                            <span class="text-slate-500">Fees</span>
                            <span class="font-semibold" id="ilp-fees">$45K (5% p.a.)</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-slate-500">Access</span>
                            <span class="font-semibold">ðŸ”’ 25 years</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-slate-500">Risk</span>
                            <span class="font-semibold">Medium</span>
                        </div>
                    </div>
                    
                    <button onclick="toggleDetails('ilp', this)" class="text-sky-600 hover:text-sky-700 font-medium text-sm flex items-center justify-center gap-1 mx-auto transition">
                        <span>Details</span>
                        <svg class="w-4 h-4 chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                </div>
                
                <div id="details-ilp" class="details-content border-t border-slate-200 mt-4">
                    <div class="text-sm space-y-2">
                        <p class="font-semibold text-slate-700 mb-3">Breakdown:</p>
                        <div class="bg-slate-50 rounded-lg p-3 mb-3 space-y-1.5">
                            <div class="flex justify-between text-slate-600">
                                <span>Expected return:</span>
                                <span class="font-medium" id="ilp-return-rate">5.0% annually</span>
                            </div>
                            <div class="flex justify-between text-slate-600">
                                <span>Expense ratio:</span>
                                <span class="font-medium" id="ilp-fee-rate">5.0% annually</span>
                            </div>
                        </div>
                        <div class="flex justify-between text-slate-600">
                            <span>Your contributions:</span>
                            <span class="font-medium" id="ilp-contributions">$150,000</span>
                        </div>
                        <div class="flex justify-between text-slate-600">
                            <span>Investment growth:</span>
                            <span class="font-medium text-emerald-600" id="ilp-growth">+$145,000</span>
                        </div>
                        <div class="flex justify-between text-red-600">
                            <span>Fees paid:</span>
                            <span class="font-medium" id="ilp-fees-breakdown">-$45,000</span>
                        </div>
                        <div class="border-t border-slate-200 pt-2 mt-2 flex justify-between font-semibold text-slate-800">
                            <span>Final value:</span>
                            <span id="ilp-final-breakdown">$250,000</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- S&P500 Card -->
            <div class="bg-sky-50 rounded-xl card-shadow-lg p-6 border-2 border-sky-200 hover:border-sky-400 hover:bg-sky-100 relative overflow-visible transition duration-200">
                
                <div class="text-center">
                    <div class="mb-4 h-32">
                        <div class="flex items-center justify-center gap-2 mb-3">
                            <p class="text-xs font-semibold text-slate-700 uppercase tracking-wider">S&P 500 (ETF)</p>
                            <button type="button" class="info-icon text-slate-400 hover:text-slate-600" 
                                    title="S&P 500 index fund (ETF) tracking top 500 US companies. Low fees (0.03% annually for VOO/SPY), no insurance. Best for pure investment growth with minimal costs.">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"/>
                                </svg>
                            </button>
                        </div>
                        <div class="text-4xl font-bold text-slate-800 mb-2" id="vwra-value">$292K</div>
                        <div class="h-14 flex flex-col items-center justify-center">
                            <p class="text-sm text-slate-500" id="vwra-diff">+$42,000</p>
                            <p class="text-xs text-slate-400">vs ILP</p>
                        </div>
                    </div>
                    
                    <div class="space-y-2.5 text-sm text-slate-700 border-t border-slate-200 pt-4 mb-4">
                        <div class="flex items-center justify-between">
                            <span class="text-slate-600">Fees</span>
                            <span class="font-semibold" id="vwra-fees">$3K (0.03% p.a.)</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-slate-600">Access</span>
                            <span class="font-semibold">âœ… Anytime</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-slate-600">Risk</span>
                            <span class="font-semibold">Med-High</span>
                        </div>
                    </div>
                    
                    <button onclick="toggleDetails('vwra', this)" class="text-sky-600 hover:text-sky-700 font-medium text-sm flex items-center justify-center gap-1 mx-auto transition">
                        <span>Details</span>
                        <svg class="w-4 h-4 chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                </div>
                
                <div id="details-vwra" class="details-content border-t border-slate-200 mt-4">
                    <div class="text-sm space-y-2">
                        <p class="font-semibold text-slate-700 mb-3">Breakdown:</p>
                        <div class="bg-sky-50 rounded-lg p-3 mb-3 space-y-1.5">
                            <div class="flex justify-between text-slate-700">
                                <span>Expected return:</span>
                                <span class="font-medium">10% annually</span>
                            </div>
                            <div class="flex justify-between text-slate-700">
                                <span>Expense ratio:</span>
                                <span class="font-medium">0.03% annually</span>
                            </div>
                        </div>
                        <div class="flex justify-between text-slate-700">
                            <span>Your contributions:</span>
                            <span class="font-medium" id="sp500-contributions">$150,000</span>
                        </div>
                        <div class="flex justify-between text-slate-700">
                            <span>Investment growth:</span>
                            <span class="font-medium text-emerald-600" id="sp500-growth">+$145,000</span>
                        </div>
                        <div class="flex justify-between text-slate-600">
                            <span>Fees paid:</span>
                            <span class="font-medium" id="sp500-fees-breakdown">-$3,000</span>
                        </div>
                        <div class="border-t border-slate-200 pt-2 mt-2 flex justify-between font-semibold text-slate-800">
                            <span>Final value:</span>
                            <span id="sp500-final-breakdown">$292,000</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CPF SA Card -->
            <div class="bg-sky-50 rounded-xl card-shadow-lg p-6 border-2 border-sky-200 hover:border-sky-400 hover:bg-sky-100 transition duration-200">
                <div class="text-center">
                    <div class="mb-4 h-32">
                        <div class="flex items-center justify-center gap-2 mb-3">
                            <p class="text-xs font-semibold text-slate-700 uppercase tracking-wider">CPF SA</p>
                            <button type="button" class="info-icon text-slate-400 hover:text-slate-600" 
                                    title="CPF Special Account: Government retirement savings with guaranteed 4% returns and tax benefits. Money locked until age 55. Safe but inflexible.">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"/>
                                </svg>
                            </button>
                        </div>
                        <div class="text-4xl font-bold text-slate-800 mb-2" id="cpf-value">$230K</div>
                        <div class="h-14 flex flex-col items-center justify-center">
                            <p class="text-sm text-slate-500" id="cpf-diff">-$20,000</p>
                            <p class="text-xs text-slate-400">vs ILP</p>
                        </div>
                    </div>
                    
                    <div class="space-y-2.5 text-sm text-slate-600 border-t border-slate-200 pt-4 mb-4">
                        <div class="flex items-center justify-between">
                            <span class="text-slate-600">Fees</span>
                            <span class="font-semibold">$0</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-slate-600">Access</span>
                            <span class="font-semibold">ðŸ”’ Age 55</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-slate-600">Risk</span>
                            <span class="font-semibold">None</span>
                        </div>
                    </div>
                    
                    <button onclick="toggleDetails('cpf', this)" class="text-sky-600 hover:text-sky-700 font-medium text-sm flex items-center justify-center gap-1 mx-auto transition">
                        <span>Details</span>
                        <svg class="w-4 h-4 chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                </div>
                
                <div id="details-cpf" class="details-content border-t border-slate-200 mt-4">
                    <div class="text-sm space-y-2">
                        <p class="font-semibold text-slate-700 mb-3">Breakdown:</p>
                        <div class="bg-sky-50 rounded-lg p-3 mb-3 space-y-1.5">
                            <div class="flex justify-between text-slate-700">
                                <span>Expected return:</span>
                                <span class="font-medium">4.08% annually</span>
                            </div>
                            <div class="flex justify-between text-slate-700">
                                <span>Expense ratio:</span>
                                <span class="font-medium">0%</span>
                            </div>
                        </div>
                        <div class="flex justify-between text-slate-600">
                            <span>Your contributions:</span>
                            <span class="font-medium" id="cpf-contributions">$150,000</span>
                        </div>
                        <div class="flex justify-between text-slate-600">
                            <span>Investment growth:</span>
                            <span class="font-medium text-emerald-600" id="cpf-growth">+$80,000</span>
                        </div>
                        <div class="flex justify-between text-slate-600">
                            <span>Fees paid:</span>
                            <span class="font-medium">$0</span>
                        </div>
                        <div class="border-t border-slate-200 pt-2 mt-2 flex justify-between font-semibold text-slate-800">
                            <span>Final value:</span>
                            <span id="cpf-final-breakdown">$230,000</span>
                        </div>
                        <p class="text-sky-600 font-medium mt-3 text-xs">âœ… 4.08% guaranteed + tax relief</p>
                    </div>
                </div>
            </div>

            <!-- SSB Card -->
            <div class="bg-sky-50 rounded-xl card-shadow-lg p-6 border-2 border-sky-200 hover:border-sky-400 hover:bg-sky-100 transition duration-200">
                <div class="text-center">
                    <div class="mb-4 h-32">
                        <div class="flex items-center justify-center gap-2 mb-3">
                            <p class="text-xs font-semibold text-slate-700 uppercase tracking-wider">SSB</p>
                            <button type="button" class="info-icon text-slate-400 hover:text-slate-600" 
                                    title="Singapore Savings Bonds: Safe government bonds with ~3% returns. Can redeem anytime without penalty. Good for emergency funds or short-term savings.">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"/>
                                </svg>
                            </button>
                        </div>
                        <div class="text-4xl font-bold text-slate-800 mb-2" id="ssb-value">$195K</div>
                        <div class="h-14 flex flex-col items-center justify-center">
                            <p class="text-sm text-slate-500" id="ssb-diff">-$55,000</p>
                            <p class="text-xs text-slate-400">vs ILP</p>
                        </div>
                    </div>
                    
                    <div class="space-y-2.5 text-sm text-slate-600 border-t border-slate-200 pt-4 mb-4">
                        <div class="flex items-center justify-between">
                            <span class="text-slate-600">Fees</span>
                            <span class="font-semibold">$0</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-slate-600">Access</span>
                            <span class="font-semibold">âœ… Monthly</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-slate-600">Risk</span>
                            <span class="font-semibold">None</span>
                        </div>
                    </div>
                    
                    <button onclick="toggleDetails('ssb', this)" class="text-sky-600 hover:text-sky-700 font-medium text-sm flex items-center justify-center gap-1 mx-auto transition">
                        <span>Details</span>
                        <svg class="w-4 h-4 chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                </div>
                
                <div id="details-ssb" class="details-content border-t border-slate-200 mt-4">
                    <div class="text-sm space-y-2">
                        <p class="font-semibold text-slate-700 mb-3">Breakdown:</p>
                        <div class="bg-sky-50 rounded-lg p-3 mb-3 space-y-1.5">
                            <div class="flex justify-between text-slate-700">
                                <span>Expected return:</span>
                                <span class="font-medium">2.9% annually</span>
                            </div>
                            <div class="flex justify-between text-slate-700">
                                <span>Expense ratio:</span>
                                <span class="font-medium">0%</span>
                            </div>
                        </div>
                        <div class="flex justify-between text-slate-600">
                            <span>Your contributions:</span>
                            <span class="font-medium" id="ssb-contributions">$150,000</span>
                        </div>
                        <div class="flex justify-between text-slate-600">
                            <span>Investment growth:</span>
                            <span class="font-medium text-emerald-600">+$45,000</span>
                        </div>
                        <div class="flex justify-between text-slate-600">
                            <span>Fees paid:</span>
                            <span class="font-medium">$0</span>
                        </div>
                        <div class="border-t border-slate-200 pt-2 mt-2 flex justify-between font-semibold text-slate-800">
                            <span>Final value:</span>
                            <span>$195,000</span>
                        </div>
                        <p class="text-sky-600 font-medium mt-3 text-xs">âœ… Govt-backed, redeem monthly</p>
                    </div>
                </div>
            </div>

            <!-- Savings Card -->
            <div class="bg-sky-50 rounded-xl card-shadow-lg p-6 border-2 border-sky-200 hover:border-sky-400 hover:bg-sky-100 transition duration-200">
                <div class="text-center">
                    <div class="mb-4 h-32">
                        <div class="flex items-center justify-center gap-2 mb-3">
                            <p class="text-xs font-semibold text-slate-700 uppercase tracking-wider">High Yield Savings</p>
                            <button type="button" class="info-icon text-slate-400 hover:text-slate-600" 
                                    title="High-yield savings account: Bank savings with ~3% interest. 100% safe, instant access anytime. Lowest returns but highest liquidity.">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"/>
                                </svg>
                            </button>
                        </div>
                        <div class="text-4xl font-bold text-slate-800 mb-2" id="savings-value">$175K</div>
                        <div class="h-14 flex flex-col items-center justify-center">
                            <p class="text-sm text-slate-500" id="savings-diff">-$75,000</p>
                            <p class="text-xs text-slate-400">less than ILP</p>
                        </div>
                    </div>
                    
                    <div class="space-y-2.5 text-sm text-slate-600 border-t border-slate-200 pt-4 mb-4">
                        <div class="flex items-center justify-between">
                            <span class="text-slate-500">Fees</span>
                            <span class="font-semibold">$0</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-slate-500">Access</span>
                            <span class="font-semibold">âœ… Anytime</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-slate-500">Risk</span>
                            <span class="font-semibold">Safe</span>
                        </div>
                    </div>
                    
                    <button onclick="toggleDetails('savings', this)" class="text-sky-600 hover:text-sky-700 font-medium text-sm flex items-center justify-center gap-1 mx-auto transition">
                        <span>Details</span>
                        <svg class="w-4 h-4 chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                </div>
                
                <div id="details-savings" class="details-content border-t border-slate-200 mt-4">
                    <div class="text-sm space-y-2">
                        <p class="font-semibold text-slate-700 mb-3">Breakdown:</p>
                        <div class="bg-slate-50 rounded-lg p-3 mb-3 space-y-1.5">
                            <div class="flex justify-between text-slate-700">
                                <span>Expected return:</span>
                                <span class="font-medium">3.0% annually</span>
                            </div>
                            <div class="flex justify-between text-slate-700">
                                <span>Expense ratio:</span>
                                <span class="font-medium">0%</span>
                            </div>
                        </div>
                        <div class="flex justify-between text-slate-600">
                            <span>Your contributions:</span>
                            <span class="font-medium" id="savings-contributions">$150,000</span>
                        </div>
                        <div class="flex justify-between text-slate-600">
                            <span>Investment growth:</span>
                            <span class="font-medium text-emerald-600" id="savings-growth">+$25,000</span>
                        </div>
                        <div class="flex justify-between text-slate-600">
                            <span>Fees paid:</span>
                            <span class="font-medium">$0</span>
                        </div>
                        <div class="border-t border-slate-200 pt-2 mt-2 flex justify-between font-semibold text-slate-800">
                            <span>Final value:</span>
                            <span id="savings-final-breakdown">$175,000</span>
                        </div>
                        <p class="text-sky-600 font-medium mt-3 text-xs">âœ… Instant access anytime</p>
                    </div>
                </div>
            </div>
        </div>
        </div>

        <!-- Section 2: Insurance Component -->
        <div class="mb-10">
            <div class="flex items-center gap-4 mb-6">
                <div class="bg-sky-500 text-white rounded-full w-12 h-12 flex items-center justify-center text-2xl font-bold shadow-lg">
                    2
                </div>
                <div>
                    <h2 class="text-3xl font-bold text-slate-800">Insurance Component</h2>
                    <p class="text-lg text-slate-600">Understanding the insurance coverage in your ILP</p>
                </div>
            </div>

            <div class="bg-white rounded-xl card-shadow-lg p-8">
                <!-- Insurance Comparison Cards -->
                <div class="grid grid-cols-2 gap-6 mb-6">
                    
                    <!-- ILP Insurance Card -->
                    <div class="bg-white rounded-xl p-6 border-2 border-slate-200 hover:border-slate-400 hover:shadow-xl transition duration-200">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h4 class="font-bold text-slate-800">Your ILP Insurance</h4>
                                <p class="text-xs text-slate-600 mt-1">Bundled with investment</p>
                            </div>
                            <button type="button" class="info-icon text-slate-400 hover:text-slate-600" 
                                    title="ILP insurance: Bundled with investment. Cost hidden in your monthly premium. Insurance charges increase as you age and can eat into investment returns.">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"/>
                                </svg>
                            </button>
                        </div>
                        
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-slate-600">Coverage:</span>
                                <div class="flex items-center gap-2">
                                    <span class="font-bold text-lg text-slate-800" id="ilpCoverage">$100,000 death/TPD</span>
                                    <button type="button" class="info-icon text-slate-400 hover:text-slate-600" 
                                            title="TPD = Total and Permanent Disability. Insurance pays out if you die OR become so disabled you can never work again.">
                                        <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="flex justify-between items-start pt-3 border-t border-slate-200">
                                <span class="text-slate-600 text-sm">Insurance cost covered by monthly premium:</span>
                                <span class="font-bold text-slate-800" id="ilpInsurancePremium">$500/month</span>
                            </div>
                            
                            <!-- Pros/Cons -->
                            <div class="mt-4 pt-3 border-t border-slate-200 space-y-2">
                                <div class="flex items-start gap-2">
                                    <span class="text-slate-400 text-sm">â€¢</span>
                                    <span class="text-xs text-slate-600">Can't separate insurance from investment</span>
                                </div>
                                <div class="flex items-start gap-2">
                                    <span class="text-slate-400 text-sm">â€¢</span>
                                    <span class="text-xs text-slate-600">Opaque pricing (hidden costs)</span>
                                </div>
                                <div class="flex items-start gap-2">
                                    <span class="text-slate-400 text-sm">â€¢</span>
                                    <span class="text-xs text-slate-600">Locked in for policy duration</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Term Life Insurance -->
                    <div class="bg-sky-50 rounded-xl p-6 border-2 border-sky-200 hover:border-sky-400 hover:bg-sky-100 transition duration-200">
                        
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h4 class="font-bold text-slate-800">Term Life Insurance</h4>
                                <p class="text-xs text-slate-600 mt-1">Pure insurance only</p>
                            </div>
                            <button type="button" class="info-icon text-slate-400 hover:text-slate-600" 
                                    title="Term life: Pure insurance with no investment. Fixed premium for 20-30 years. Transparent pricing. Cheapest way to get protection. Cancel anytime.">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"/>
                                </svg>
                            </button>
                        </div>
                        
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span class="text-slate-600">Same coverage:</span>
                                <div class="flex items-center gap-2">
                                    <span class="font-bold text-lg text-slate-800" id="termCoverage">$100,000 death/TPD</span>
                                    <button type="button" class="info-icon text-slate-400 hover:text-slate-600" 
                                            title="TPD = Total and Permanent Disability. Insurance pays out if you die OR become so disabled you can never work again.">
                                        <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="flex justify-between items-center pt-3 border-t border-slate-200">
                                <span class="text-slate-600">Market rate:</span>
                                <span class="font-bold text-lg text-slate-800" id="termInsuranceCost">~$15/month</span>
                            </div>
                            
                            <!-- Pros/Cons -->
                            <div class="mt-4 pt-3 border-t border-slate-200 space-y-2">
                                <div class="flex items-start gap-2">
                                    <span class="text-slate-400 text-sm">â€¢</span>
                                    <span class="text-xs text-slate-700">Pure protection, transparent pricing</span>
                                </div>
                                <div class="flex items-start gap-2">
                                    <span class="text-slate-400 text-sm">â€¢</span>
                                    <span class="text-xs text-slate-700">5-6x cheaper than bundled insurance</span>
                                </div>
                                <div class="flex items-start gap-2">
                                    <span class="text-slate-400 text-sm">â€¢</span>
                                    <span class="text-xs text-slate-700">Cancel anytime, no lock-in</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

        <!-- Other Options -->
        <div class="bg-white rounded-xl card-shadow-lg p-8 mb-8 animate-in" style="animation-delay: 0.5s">
            <h3 class="text-2xl font-bold text-slate-800 mb-3">Explore Other Options</h3>
            <p class="text-slate-600 mb-6">Not sure S&P 500 is right for you? Consider these:</p>
            
            <div class="grid gap-4">
                <div class="flex items-start gap-4 p-5 bg-sky-50 rounded-xl hover:bg-sky-100 transition">
                    <div class="text-3xl">ðŸ›¡ï¸</div>
                    <div class="flex-1">
                        <p class="font-semibold text-slate-800 mb-1">If you want guaranteed returns with tax benefits</p>
                        <p class="text-sm text-slate-600">Consider <span class="font-semibold text-sky-600">CPF SA</span> ($230K, 4.08% guaranteed)</p>
                    </div>
                </div>
                
                <div class="flex items-start gap-4 p-5 bg-sky-50 rounded-xl hover:bg-sky-100 transition">
                    <div class="text-3xl">ðŸ’°</div>
                    <div class="flex-1">
                        <p class="font-semibold text-slate-800 mb-1">If you want safe money you can access monthly</p>
                        <p class="text-sm text-slate-600">Consider <span class="font-semibold text-sky-600">SSB</span> ($195K, redeem monthly)</p>
                    </div>
                </div>
                
                <div class="flex items-start gap-4 p-5 bg-sky-50 rounded-xl hover:bg-sky-100 transition">
                    <div class="text-3xl">âš¡</div>
                    <div class="flex-1">
                        <p class="font-semibold text-slate-800 mb-1">If you need emergency fund with instant access</p>
                        <p class="text-sm text-slate-600">Consider <span class="font-semibold text-sky-600">High-Yield Savings</span> ($175K, instant)</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Learn More -->
        <div class="bg-white rounded-xl card-shadow-lg p-8 mb-8">
            <h3 class="text-2xl font-bold text-slate-800 mb-6">Learn More</h3>
            <div class="grid grid-cols-2 gap-4">
                <a href="#" class="flex items-center gap-4 p-4 border-2 border-slate-200 rounded-xl hover:border-sky-500 hover:bg-sky-50 transition group">
                    <span class="text-3xl">ðŸ“Š</span>
                    <span class="text-sm font-medium text-slate-700 group-hover:text-sky-600">How investment fees work</span>
                </a>
                <a href="#" class="flex items-center gap-4 p-4 border-2 border-slate-200 rounded-xl hover:border-sky-500 hover:bg-sky-50 transition group">
                    <span class="text-3xl">ðŸ¦</span>
                    <span class="text-sm font-medium text-slate-700 group-hover:text-sky-600">Setting up S&P 500 ETF (step-by-step)</span>
                </a>
                <a href="#" class="flex items-center gap-4 p-4 border-2 border-slate-200 rounded-xl hover:border-sky-500 hover:bg-sky-50 transition group">
                    <span class="text-3xl">ðŸ’°</span>
                    <span class="text-sm font-medium text-slate-700 group-hover:text-sky-600">Understanding risk levels</span>
                </a>
                <a href="#" class="flex items-center gap-4 p-4 border-2 border-slate-200 rounded-xl hover:border-sky-500 hover:bg-sky-50 transition group">
                    <span class="text-3xl">ðŸ“±</span>
                    <span class="text-sm font-medium text-slate-700 group-hover:text-sky-600">Download comparison as PDF</span>
                </a>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="flex gap-4 justify-center mb-10">
            <button onclick="downloadPDF()" class="px-8 py-4 bg-sky-500 hover:bg-sky-600 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition transform hover:scale-105">
                Download PDF
            </button>
            <button onclick="toggleEditMode()" class="px-8 py-4 bg-white border-2 border-sky-500 text-sky-600 font-semibold rounded-lg hover:bg-sky-50 shadow-sm hover:shadow-md transition">
                Compare Another Product
            </button>
            <button onclick="shareResults()" class="px-8 py-4 bg-white border-2 border-slate-300 text-slate-700 font-semibold rounded-lg hover:bg-slate-50 shadow-sm hover:shadow-md transition">
                Share Results
            </button>
        </div>

        <!-- Disclaimer -->
        <div class="bg-slate-100 rounded-xl p-6 text-center">
            <p class="font-semibold text-slate-700 mb-2">Disclaimer</p>
            <p class="text-sm text-slate-600 max-w-4xl mx-auto">
                This tool provides estimates for educational purposes. Actual returns may vary based on market performance. 
                Consider consulting a licensed financial advisor for personalized advice.
            </p>
        </div>
    </div>

    <script>
        // Insurance cost estimation function
        function estimateInsuranceCost(age, gender, coverage) {
            // Singapore term life rates per $1000 coverage per month (based on DirectAsia, Income, AIA)
            let ratePerThousand;
            
            if (age <= 30) ratePerThousand = 0.15;
            else if (age <= 35) ratePerThousand = 0.20;
            else if (age <= 40) ratePerThousand = 0.30;
            else if (age <= 45) ratePerThousand = 0.45;
            else if (age <= 50) ratePerThousand = 0.65;
            else ratePerThousand = 1.00;
            
            // Female discount (lower mortality, typically 20-30% cheaper)
            if (gender === 'female') {
                ratePerThousand *= 0.75;
            }
            
            // ILP typically charges 5-8x market rate for insurance (due to bundling overhead)
            const ilpMultiplier = 6;
            const ilpCost = (coverage / 1000) * ratePerThousand * ilpMultiplier;
            
            // Term life market rate
            const termCost = (coverage / 1000) * ratePerThousand;
            
            return {
                ilpMonthly: ilpCost,
                termMonthly: termCost,
                ilpTotal: ilpCost * 12 * 25,
                termTotal: termCost * 12 * 25,
                difference: (ilpCost - termCost) * 12 * 25
            };
        }
        
        // Update insurance section
        function updateInsuranceSection() {
            const age = parseInt(document.getElementById('editAge')?.value || 28);
            const gender = document.getElementById('editGender')?.value || 'male';
            const coverage = parseInt(document.getElementById('editCoverage')?.value || 100000);
            
            const costs = estimateInsuranceCost(age, gender, coverage);
            
            // Update coverage amounts
            const formatCoverage = (val) => '$' + (val / 1000) + 'K';
            document.getElementById('ilpCoverage').textContent = formatCoverage(coverage) + ' death/TPD';
            document.getElementById('termCoverage').textContent = formatCoverage(coverage) + ' death/TPD';
            
            // Update ILP monthly premium (from editMonthly input)
            const monthly = parseFloat(document.getElementById('editMonthly')?.value || 500);
            document.getElementById('ilpInsurancePremium').textContent = '$' + monthly + '/month';
            
            // Update term insurance cost only
            document.getElementById('termInsuranceCost').textContent = '~$' + Math.round(costs.termMonthly) + '/month';
        }
        
        // Initialize insurance section on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateInsuranceSection();
        });
        
        function uploadILP() {
            alert('ðŸ“„ Document Upload - Coming in Phase 3!\n\n' +
                  'Why not Phase 1?\n' +
                  'â€¢ OCR accuracy: 60-80% (leads to errors)\n' +
                  'â€¢ Development time: 8-12 weeks\n' +
                  'â€¢ Complexity vs. value trade-off\n\n' +
                  'For now, please use the "Edit" button to enter 3 simple values:\n' +
                  'â€¢ Monthly premium\n' +
                  'â€¢ Investment period\n' +
                  'â€¢ Expected returns\n' +
                  'â€¢ Annual fees\n\n' +
                  'Takes 30 seconds! ðŸš€');
        }
        
        function toggleDetails(option, button) {
            const details = document.getElementById(`details-${option}`);
            const chevron = button.querySelector('.chevron');
            
            const isExpanded = details.classList.contains('expanded');
            
            if (isExpanded) {
                details.classList.remove('expanded');
                chevron.classList.remove('rotated');
            } else {
                details.classList.add('expanded');
                chevron.classList.add('rotated');
            }
        }
        
        function toggleEditMode() {
            const editMode = document.getElementById('editMode');
            if (editMode.style.display === 'none') {
                editMode.style.display = 'block';
                // Scroll to top to show the edit section properly
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } else {
                editMode.style.display = 'none';
            }
        }
        
        function useScenario(monthly, years, returns, fees) {
            document.getElementById('editMonthly').value = monthly;
            document.getElementById('editYears').value = years;
            document.getElementById('editReturns').value = returns;
            document.getElementById('editFees').value = fees;
        }
        
        function showFeeCalculator() {
            alert('Fee calculator feature coming soon! For now, add up all fees from your ILP proposal:\n\nâ€¢ Administrative charge (%)\nâ€¢ Fund management fee (%)\nâ€¢ Policy fee ($/month converted to %)\nâ€¢ Insurance charges\n\nTypical total: 4-6%');
        }
        
        function calculateFutureValue(monthlyPayment, years, annualReturn, annualFees) {
            const months = years * 12;
            const monthlyReturn = annualReturn / 12;
            const monthlyFees = annualFees / 12;
            const netMonthlyReturn = monthlyReturn - monthlyFees;
            
            if (netMonthlyReturn === 0) {
                return monthlyPayment * months;
            }
            
            const fv = monthlyPayment * (Math.pow(1 + netMonthlyReturn, months) - 1) / netMonthlyReturn;
            return fv;
        }
        
        function updateCalculations() {
            const monthly = parseFloat(document.getElementById('editMonthly').value);
            const years = parseInt(document.getElementById('editYears').value);
            const ilpReturns = parseFloat(document.getElementById('editReturns').value) / 100;
            const ilpFees = parseFloat(document.getElementById('editFees').value) / 100;
            
            if (!monthly || !years || ilpFees < 0) {
                alert('Please enter valid values');
                return;
            }
            
            // Calculate all values using user-selected ILP returns
            const ilpValue = calculateFutureValue(monthly, years, ilpReturns, ilpFees);
            const sp500Value = calculateFutureValue(monthly, years, 0.10, 0.0003); // S&P 500: 10% return, 0.03% fees
            const cpfValue = calculateFutureValue(monthly, years, 0.0408, 0);
            const ssbValue = calculateFutureValue(monthly, years, 0.032, 0);
            const savingsValue = calculateFutureValue(monthly, years, 0.03, 0);
            
            const totalContributions = monthly * years * 12;
            
            // Calculate what final value would be WITHOUT fees for proper fee calculation
            const ilpValueNoFees = calculateFutureValue(monthly, years, ilpReturns, 0);
            const actualFeesInDollars = ilpValueNoFees - ilpValue;
            
            // Calculate S&P 500 actual fees (not rough estimate)
            const sp500ValueNoFees = calculateFutureValue(monthly, years, 0.10, 0);
            const sp500ActualFees = sp500ValueNoFees - sp500Value;
            
            // Format for display
            const formatK = (val) => '$' + Math.round(val / 1000) + 'K';
            const formatFull = (val) => '$' + Math.round(val).toLocaleString();
            const formatDiff = (val) => {
                const diff = val - ilpValue;
                return (diff >= 0 ? '+' : '') + formatFull(diff);
            };
            
            // Update all card values
            document.getElementById('ilp-value').textContent = formatK(ilpValue);
            // Show annual fee rate instead of trying to calculate total percentage
            document.getElementById('ilp-fees').textContent = `${formatK(actualFeesInDollars)} (${ilpFees * 100}% p.a.)`;
            
            document.getElementById('vwra-value').textContent = formatK(sp500Value);
            document.getElementById('vwra-fees').textContent = `${formatK(sp500ActualFees)} (0.03% p.a.)`;
            document.getElementById('vwra-diff').textContent = formatDiff(sp500Value);
            
            document.getElementById('cpf-value').textContent = formatK(cpfValue);
            document.getElementById('cpf-diff').textContent = formatDiff(cpfValue);
            
            document.getElementById('ssb-value').textContent = formatK(ssbValue);
            document.getElementById('ssb-diff').textContent = formatDiff(ssbValue);
            
            document.getElementById('savings-value').textContent = formatK(savingsValue);
            document.getElementById('savings-diff').textContent = formatDiff(savingsValue);
            
            // Update ILP breakdown
            document.getElementById('ilp-return-rate').textContent = `${(ilpReturns * 100).toFixed(1)}% annually`;
            document.getElementById('ilp-fee-rate').textContent = `${(ilpFees * 100).toFixed(1)}% annually`;
            document.getElementById('ilp-contributions').textContent = formatFull(totalContributions);
            document.getElementById('ilp-growth').textContent = '+' + formatFull(ilpValueNoFees - totalContributions);
            document.getElementById('ilp-fees-breakdown').textContent = '-' + formatFull(actualFeesInDollars);
            document.getElementById('ilp-final-breakdown').textContent = formatFull(ilpValue);
            
            // Update S&P 500 breakdown (with null checks)
            const sp500Contrib = document.getElementById('sp500-contributions');
            const sp500Growth = document.getElementById('sp500-growth');
            const sp500FeesBreakdown = document.getElementById('sp500-fees-breakdown');
            const sp500FinalBreakdown = document.getElementById('sp500-final-breakdown');
            if (sp500Contrib) sp500Contrib.textContent = formatFull(totalContributions);
            if (sp500Growth) sp500Growth.textContent = '+' + formatFull(sp500ValueNoFees - totalContributions);
            if (sp500FeesBreakdown) sp500FeesBreakdown.textContent = '-' + formatFull(sp500ActualFees);
            if (sp500FinalBreakdown) sp500FinalBreakdown.textContent = formatFull(sp500Value);
            
            // Update CPF breakdown (with null checks)
            const cpfContrib = document.getElementById('cpf-contributions');
            const cpfGrowth = document.getElementById('cpf-growth');
            const cpfFinal = document.getElementById('cpf-final-breakdown');
            if (cpfContrib) cpfContrib.textContent = formatFull(totalContributions);
            if (cpfGrowth) cpfGrowth.textContent = '+' + formatFull(cpfValue - totalContributions);
            if (cpfFinal) cpfFinal.textContent = formatFull(cpfValue);
            
            // Update SSB breakdown (with null checks)
            const ssbContrib = document.getElementById('ssb-contributions');
            const ssbGrowth = document.getElementById('ssb-growth');
            const ssbFinal = document.getElementById('ssb-final-breakdown');
            if (ssbContrib) ssbContrib.textContent = formatFull(totalContributions);
            if (ssbGrowth) ssbGrowth.textContent = '+' + formatFull(ssbValue - totalContributions);
            if (ssbFinal) ssbFinal.textContent = formatFull(ssbValue);
            
            // Update Savings breakdown (with null checks)
            const savingsContrib = document.getElementById('savings-contributions');
            const savingsGrowth = document.getElementById('savings-growth');
            const savingsFinal = document.getElementById('savings-final-breakdown');
            if (savingsContrib) savingsContrib.textContent = formatFull(totalContributions);
            if (savingsGrowth) savingsGrowth.textContent = '+' + formatFull(savingsValue - totalContributions);
            if (savingsFinal) savingsFinal.textContent = formatFull(savingsValue);
            
            // Update header
            const headerText = document.querySelector('.bg-sky-600.bg-opacity-50 p');
            if (headerText) {
                headerText.innerHTML = `<span class="font-semibold">Your inputs:</span> $${monthly}/month for ${years} years`;
            }
            
            // Update insurance section
            updateInsuranceSection();
            
            // Close edit mode
            toggleEditMode();
            
            // Scroll to top to see results
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        function downloadPDF() {
            alert('PDF download feature coming soon!\n\nFor now, you can:\nâ€¢ Take a screenshot (Cmd/Ctrl + Shift + S)\nâ€¢ Print to PDF (Cmd/Ctrl + P â†’ Save as PDF)\nâ€¢ Share the link with your advisor');
        }
        
        function shareResults() {
            const url = window.location.href;
            
            if (navigator.share) {
                // Use native share on mobile
                navigator.share({
                    title: 'TrueCost ILP Comparison',
                    text: 'Check out my ILP comparison results',
                    url: url
                }).catch(() => {
                    // Fallback to copy to clipboard
                    copyToClipboard(url);
                });
            } else {
                // Desktop: copy to clipboard
                copyToClipboard(url);
            }
        }
        
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('âœ… Link copied to clipboard!\n\nShare this link with your financial advisor or friends.');
            }).catch(() => {
                alert('Link: ' + text + '\n\nCopy this link to share your results.');
            });
        }
    </script>
</body>
</html>
